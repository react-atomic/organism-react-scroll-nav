{"version":3,"file":"main.1c41b6dc7964acf31bf1.hot-update.js","sources":["webpack:///./build/cjs/ui/organisms/ScrollReceiver.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"reshow-runtime/es/helpers/objectWithoutPropertiesLoose\";\nimport _objectSpread from \"reshow-runtime/es/helpers/objectSpread2\";\nimport _inheritsLoose from \"reshow-runtime/es/helpers/inheritsLoose\";\nimport _defineProperty from \"reshow-runtime/es/helpers/defineProperty\";\nimport React, { Component, isValidElement } from 'react';\nimport { connect } from 'reshow-flux';\nimport { build, SemanticUI } from 'react-atomic-molecule';\nimport scrollStore from '../../src/stores/scrollStore';\nimport fastScrollStore from '../../src/stores/fastScrollStore';\n\nvar ScrollReceiver = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ScrollReceiver, _Component);\n\n  function ScrollReceiver() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  ScrollReceiver.getStores = function getStores(props) {\n    return props.noDelay ? [fastScrollStore] : [scrollStore];\n  };\n\n  ScrollReceiver.calculateState = function calculateState(prevState, props) {\n    var noDelay = props.noDelay,\n        targetId = props.targetId,\n        scrollMargin = props.scrollMargin;\n    var store = noDelay ? fastScrollStore : scrollStore;\n    var state = store.getState();\n    var isShown = prevState && prevState.isShown || false;\n    var pos = store.getOffset(targetId, store.storeName) || {};\n    var scrollInfo = store.getMap('scroll');\n    var scrollTop = scrollInfo.top;\n\n    if (pos.isOnScreen) {\n      isShown = true;\n    }\n\n    console.log(state.get('m' + scrollMargin));\n    var active = 'undefined' !== typeof targetId && targetId === state.get('m' + scrollMargin);\n\n    if (!isNaN(scrollMargin)) {\n      store.addMargin(scrollMargin);\n    }\n\n    return _objectSpread(_objectSpread({}, pos), {}, {\n      active: active,\n      scrollTop: scrollTop,\n      scrollInfo: scrollInfo,\n      isShown: isShown\n    });\n  };\n\n  var _proto = ScrollReceiver.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        atom = _this$props.atom,\n        container = _this$props.container,\n        scrollMargin = _this$props.scrollMargin,\n        targetId = _this$props.targetId,\n        isScrollReceiver = _this$props.isScrollReceiver,\n        noDelay = _this$props.noDelay,\n        children = _this$props.children,\n        resetProps = _objectWithoutPropertiesLoose(_this$props, [\"atom\", \"container\", \"scrollMargin\", \"targetId\", \"isScrollReceiver\", \"noDelay\", \"children\"]);\n\n    if (!container) {\n      return /*#__PURE__*/React.createElement(SemanticUI, resetProps, children);\n    }\n\n    var targetInfo = _objectSpread(_objectSpread({}, this.state), {}, {\n      targetId: targetId\n    });\n\n    var thisChildren = children;\n\n    if (!thisChildren && /*#__PURE__*/isValidElement(container)) {\n      thisChildren = container.props.children;\n    }\n\n    return build(container)(_objectSpread(_objectSpread({}, resetProps), {}, {\n      targetInfo: targetInfo\n    }), thisChildren);\n  };\n\n  return ScrollReceiver;\n}(Component);\n\n_defineProperty(ScrollReceiver, \"defaultProps\", {\n  scrollMargin: 'default',\n  isScrollReceiver: true,\n  noDelay: false\n});\n\nexport default _c = connect(ScrollReceiver, {\n  withProps: true\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");\n\n__react_refresh_utils__.registerExportsForReactRefresh(module);\n\nif (module.hot && __react_refresh_utils__.isReactRefreshBoundary(module)) {\n  module.hot.dispose(__react_refresh_utils__.createHotDisposeCallback(module));\n  module.hot.accept(__react_refresh_utils__.createHotErrorHandler(module.id));\n\n  if (!!module.hot.data && !!Object.keys(module.hot.data).length) {\n    if (!module.hot.data.module || __react_refresh_utils__.shouldInvalidateReactRefreshBoundary(module.hot.data.module, module)) {\n      window.location.reload();\n    }\n\n    __react_refresh_utils__.enqueueUpdate();\n  }\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}