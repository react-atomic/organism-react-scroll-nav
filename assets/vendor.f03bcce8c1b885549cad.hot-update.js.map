{"version":3,"file":"vendor.f03bcce8c1b885549cad.hot-update.js","sources":["webpack:///./node_modules/reshow-flux/build/es/connect.js"],"sourcesContent":["import _classCallCheck from \"reshow-runtime/es/helpers/classCallCheck\";\nimport _createClass from \"reshow-runtime/es/helpers/createClass\";\nimport _assertThisInitialized from \"reshow-runtime/es/helpers/assertThisInitialized\";\nimport _inherits from \"reshow-runtime/es/helpers/inherits\";\nimport _possibleConstructorReturn from \"reshow-runtime/es/helpers/possibleConstructorReturn\";\nimport _get from \"reshow-runtime/es/helpers/get\";\nimport _getPrototypeOf from \"reshow-runtime/es/helpers/getPrototypeOf\";\nimport _defineProperty from \"reshow-runtime/es/helpers/defineProperty\";\nimport _objectSpread from \"reshow-runtime/es/helpers/objectSpread2\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport dedup from 'array.dedup';\nimport { CHANGE } from 'reshow-flux-base';\nvar DEFAULT_OPTIONS = {\n  withProps: false\n};\nvar keys = Object.keys;\n\nvar getProps = function getProps(props, opt) {\n  return opt.withProps && props ? props : {};\n};\n\nvar getState = function getState(self, prevState, maybeProps, opt) {\n  return self.calculateState(prevState, getProps(maybeProps, opt));\n};\n\nvar getStores = function getStores(self, maybeProps, opt) {\n  return self.getStores(getProps(maybeProps, opt));\n};\n\nvar connect = function connect(Base, options) {\n  var thisOptions = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options || {});\n\n  var ConnectedClass = /*#__PURE__*/function (_Base) {\n    _inherits(ConnectedClass, _Base);\n\n    var _super = _createSuper(ConnectedClass);\n\n    function ConnectedClass(props) {\n      var _thisSuper, _thisSuper2, _this;\n\n      _classCallCheck(this, ConnectedClass);\n\n      _this = _super.call(this, props);\n\n      _defineProperty(_assertThisInitialized(_this), \"__stores\", []);\n\n      _defineProperty(_assertThisInitialized(_this), \"__handleChange\", function () {\n        if (!_this.__stores) {\n          // avoid race condition\n          return;\n        }\n\n        var con = _this.constructor;\n\n        _this.setState(function (prevState, currentProps) {\n          return getState(con, prevState, currentProps, thisOptions);\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"__setStores\", function (stores) {\n        console.log({_this});\n        if (_this.__stores) {\n          _this.__resetStores();\n        }\n\n        stores = dedup(stores);\n        (stores || []).forEach(function (store) {\n          return store.addListener(_this.__handleChange, CHANGE);\n        });\n        _this.__stores = stores;\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"__resetStores\", function () {\n        if (!_this.__stores) {\n          return;\n        }\n\n        _this.__stores.forEach(function (store) {\n          return store.removeListener(_this.__handleChange, CHANGE);\n        });\n\n        _this.__stores = null;\n      });\n\n      var _con = _this.constructor;\n\n      if (!_con.calculateState) {\n        _con.calculateState = _get((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(ConnectedClass.prototype)), \"calculateState\", _thisSuper);\n      }\n\n      if (!_con.getStores) {\n        _con.getStores = _get((_thisSuper2 = _assertThisInitialized(_this), _getPrototypeOf(ConnectedClass.prototype)), \"getStores\", _thisSuper2);\n      }\n\n      _con.calculateState.bind(_con);\n\n      _con.getStores.bind(_con);\n\n      if (props.withConstructor) {\n        _this.__setStores(getStores(_con, props, thisOptions));\n      }\n\n      if (!_this.state) {\n        _this.state = {};\n      }\n\n      if (!thisOptions.withProps) {\n        var calculatedState = getState(_con, undefined, props, thisOptions);\n\n        if (calculatedState) {\n          keys(calculatedState).forEach(function (key) {\n            return _this.state[key] = calculatedState[key];\n          });\n        }\n      }\n\n      return _this;\n    }\n\n    _createClass(ConnectedClass, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        if (_get(_getPrototypeOf(ConnectedClass.prototype), \"componentDidMount\", this)) {\n          _get(_getPrototypeOf(ConnectedClass.prototype), \"componentDidMount\", this).call(this);\n        }\n\n        if (this.props && !this.props.withConstructor) {\n          this.__setStores(getStores(this.constructor, this.props, thisOptions));\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        if (_get(_getPrototypeOf(ConnectedClass.prototype), \"componentDidUpdate\", this)) {\n          _get(_getPrototypeOf(ConnectedClass.prototype), \"componentDidUpdate\", this).call(this, prevProps, prevState);\n        }\n\n        if (thisOptions.withProps) {\n          this.__setStores(getStores(this.constructor, this.props, thisOptions));\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        if (_get(_getPrototypeOf(ConnectedClass.prototype), \"componentWillUnmount\", this)) {\n          _get(_getPrototypeOf(ConnectedClass.prototype), \"componentWillUnmount\", this).call(this);\n        }\n\n        this.__resetStores();\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(nextProps, prevState) {\n        var thisStates = null;\n\n        if (_get(_getPrototypeOf(ConnectedClass), \"getDerivedStateFromProps\", this)) {\n          thisStates = _get(_getPrototypeOf(ConnectedClass), \"getDerivedStateFromProps\", this).call(this, nextProps, prevState);\n        }\n\n        if (thisOptions.withProps) {\n          var calState = getState(ConnectedClass, _objectSpread(_objectSpread({}, prevState), thisStates), nextProps, thisOptions);\n          thisStates = _objectSpread(_objectSpread({}, thisStates), calState);\n        }\n\n        return thisStates;\n      }\n    }]);\n\n    return ConnectedClass;\n  }(Base);\n\n  var componentName = Base.displayName || Base.name;\n  ConnectedClass.displayName = 'FluxConnected(' + componentName + ')';\n  return ConnectedClass;\n};\n\nexport default connect;\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}