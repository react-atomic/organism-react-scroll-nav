{"version":3,"file":"vendor.1f47d43232d138839709.hot-update.js","sources":["webpack:///./node_modules/reshow-flux-base/build/es/Store.js"],"sourcesContent":["import _classCallCheck from \"reshow-runtime/es/helpers/classCallCheck\";\nimport _createClass from \"reshow-runtime/es/helpers/createClass\";\nimport _defineProperty from \"reshow-runtime/es/helpers/defineProperty\";\nimport mitt from \"./mitt\";\nvar CHANGE = \"chg\";\n\nvar Store = /*#__PURE__*/function () {\n  _createClass(Store, [{\n    key: \"reduce\",\n    value: function reduce() {\n      console.error(\"Not override reduce().\");\n    }\n  }, {\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      console.error(\"Not override getInitialState().\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(one, two) {\n      return one === two;\n    }\n  }]);\n\n  function Store(dispatcher) {\n    var _this = this;\n\n    _classCallCheck(this, Store);\n\n    _defineProperty(this, \"__invokeOnDispatch\", function (action) {\n      var startingState = _this._state;\n\n      var endingState = _this.reduce(startingState, action);\n\n      if (endingState === undefined) {\n        console.error(\"reduce() return undefined.\");\n      }\n\n      if (!_this.equals(startingState, endingState)) {\n        _this._state = endingState;\n\n        _this.emit(CHANGE);\n      }\n\n      if (_this.nextEmits.length) {\n        var nextRun = function nextRun() {\n          var dedup = {};\n\n          while (_this.nextEmits.length) {\n            var emitType = _this.nextEmits.shift();\n\n            if (!dedup[emitType]) {\n              dedup[emitType] = true;\n\n              _this.emit(emitType, {\n                state: endingState,\n                action: action\n              });\n            }\n          }\n        };\n\n        if (_this.nextAsync) {\n          _this.nextAsync = false;\n          setTimeout(nextRun);\n        } else {\n          nextRun();\n        }\n      }\n    });\n\n    _defineProperty(this, \"emit\", function (e, payload) {\n      return _this.mitt.emit(e, payload);\n    });\n\n    _defineProperty(this, \"addListener\", function (listener, e) {\n      return _this.mitt.on(e, listener);\n    });\n\n    _defineProperty(this, \"removeListener\", function (listener, e) {\n      return _this.mitt.off(e, listener);\n    });\n\n    dispatcher.register(this.__invokeOnDispatch);\n    this._state = this.reset();\n  }\n\n  _createClass(Store, [{\n    key: \"reset\",\n    value: function reset() {\n      this.mitt = new mitt();\n      this.nextEmits = [];\n      this.nextAsync = false;\n      return this.getInitialState();\n    }\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this._state;\n    }\n    /* Following not extendable */\n\n  }]);\n\n  return Store;\n}();\n\nexport default Store;\nexport { CHANGE };\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}