{"version":3,"file":"main.b781ddcca7286ac05d19.hot-update.js","sources":["webpack:///./build/cjs/ui/organisms/SmoothScrollLink.js"],"sourcesContent":["import _extends from \"reshow-runtime/es/helpers/extends\";\nimport _objectSpread from \"reshow-runtime/es/helpers/objectSpread2\";\nimport _objectWithoutPropertiesLoose from \"reshow-runtime/es/helpers/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"reshow-runtime/es/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"reshow-runtime/es/helpers/inheritsLoose\";\nimport _defineProperty from \"reshow-runtime/es/helpers/defineProperty\";\nimport React, { PureComponent } from 'react';\nimport smoothScrollTo from 'smooth-scroll-to';\nimport getOffset from 'getoffset';\nimport { ScrollReceiver } from '../../src/index';\nimport scrollStore from '../../src/stores/scrollStore';\nimport fastScrollStore from '../../src/stores/fastScrollStore';\nvar scollTimer = null;\n\nvar resetTimer = function resetTimer() {\n  if (scollTimer) {\n    clearTimeout(scollTimer);\n    scollTimer = false;\n  }\n};\n\nvar SmoothScrollLink = /*#__PURE__*/function (_PureComponent) {\n  _inheritsLoose(SmoothScrollLink, _PureComponent);\n\n  function SmoothScrollLink() {\n    var _s = $RefreshSig$();\n\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _PureComponent.call.apply(_PureComponent, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      scrollRefElement: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", _s(function (e) {\n      _s();\n\n      var props = _this.props;\n\n      var store = _this.useStore();\n\n      var preventDefault = props.preventDefault,\n          targetId = props.targetId;\n      var scrollRefElement = _this.state.scrollRefElement;\n\n      if (preventDefault) {\n        e.preventDefault();\n      }\n\n      resetTimer();\n      var offset = store.getOffset(targetId);\n\n      if (offset) {\n        var margin = _this.getMargin(props, scrollRefElement);\n\n        scollTimer = true;\n        smoothScrollTo(offset.top - margin, null, null, function () {\n          if (true !== scollTimer) {\n            return;\n          }\n\n          scollTimer = setTimeout(function () {\n            margin = _this.getMargin(props, scrollRefElement);\n            offset = store.getOffset(targetId);\n            smoothScrollTo(offset.top - margin, 100);\n          }, 500);\n        });\n      }\n    }, \"lacCqcEtsbxX3PAG/fPlTuRiPg0=\", false, function () {\n      return [_this.useStore];\n    }));\n\n    return _this;\n  }\n\n  var _proto = SmoothScrollLink.prototype;\n\n  _proto.useStore = function useStore() {\n    var noDelay = this.props.noDelay;\n    return noDelay ? fastScrollStore : scrollStore;\n  };\n\n  _proto.getMargin = function getMargin(props, ref) {\n    var scrollRefLoc = props.scrollRefLoc,\n        scrollMargin = props.scrollMargin;\n    var margin = 0;\n\n    if (ref) {\n      var refOffset = getOffset(ref, false);\n\n      switch (scrollRefLoc) {\n        case 'bottom':\n          margin += refOffset.bottom - refOffset.top;\n          break;\n\n        default:\n        case 'top':\n          break;\n      }\n    }\n\n    if (!isNaN(scrollMargin)) {\n      margin += scrollMargin;\n    }\n\n    margin--;\n    return margin;\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var dom = document.getElementById(this.props.scrollRefId);\n\n    if (dom) {\n      this.setState({\n        scrollRefElement: dom\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    resetTimer();\n  };\n\n  _proto.render = function render() {\n    var props = this.props;\n\n    var targetId = props.targetId,\n        scrollRefLoc = props.scrollRefLoc,\n        scrollMargin = props.scrollMargin,\n        scrollRefId = props.scrollRefId,\n        style = props.style,\n        preventDefault = props.preventDefault,\n        others = _objectWithoutPropertiesLoose(props, [\"targetId\", \"scrollRefLoc\", \"scrollMargin\", \"scrollRefId\", \"style\", \"preventDefault\"]);\n\n    var scrollRefElement = this.state.scrollRefElement;\n    var margin = this.getMargin(props, scrollRefElement) + 1;\n    return /*#__PURE__*/React.createElement(ScrollReceiver, _extends({\n      atom: \"a\"\n    }, others, {\n      targetId: targetId,\n      scrollMargin: margin,\n      style: _objectSpread(_objectSpread({}, Styles.link), style),\n      onClick: this.handleClick\n    }));\n  };\n\n  return SmoothScrollLink;\n}(PureComponent);\n\n_defineProperty(SmoothScrollLink, \"defaultProps\", {\n  scrollRefId: '',\n  scrollRefLoc: 'bottom',\n  preventDefault: true,\n  noDelay: false\n});\n\nexport default SmoothScrollLink;\nvar Styles = {\n  link: {\n    cursor: 'pointer'\n  }\n};\n\n__react_refresh_utils__.registerExportsForReactRefresh(module);\n\nif (module.hot && __react_refresh_utils__.isReactRefreshBoundary(module)) {\n  module.hot.dispose(__react_refresh_utils__.createHotDisposeCallback(module));\n  module.hot.accept(__react_refresh_utils__.createHotErrorHandler(module.id));\n\n  if (!!module.hot.data && !!Object.keys(module.hot.data).length) {\n    if (!module.hot.data.module || __react_refresh_utils__.shouldInvalidateReactRefreshBoundary(module.hot.data.module, module)) {\n      window.location.reload();\n    }\n\n    __react_refresh_utils__.enqueueUpdate();\n  }\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}